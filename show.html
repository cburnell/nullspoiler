<!doctype html>
<html>
	<head>
		<script src='/socket.io/socket.io.js'></script>
		<script>
var socket = io();

socket.on('welcome', function(data) {

	// Respond with a message including this clients' id sent from the server
	socket.emit('i am client', {data: 'foo!', id: data.id});
});

socket.on('error', console.error.bind(console));
socket.on('message', console.log.bind(console));
socket.emit('show log', 'default');
var log_to_show = {}
socket.on('return log', function(data) {console.log(data); log_to_show = JSON.parse(data)});
console.log(log_to_show); 
		</script>
	</head>
	<body>
		<div id = "running_log">OHMYGODICANTBELIEVE <br /></div>
		<!-- Display the countdown timer in an element -->
		<div id="time"></div>
		<script> 
// Set the date we're counting down to
var countDownDate = new Date().getTime();
var distance;
// Update the count down every 1 second
var x = setInterval(function() {
	// Get todays date and time
	var now = new Date().getTime();
	// Find the distance between now an the count down date
	distance = Math.floor((now - countDownDate)/1000);
    console.log(log_to_show[distance]);
    if(log_to_show[distance] != undefined){
		var hours = Math.floor((distance %
			(60 * 60 * 24)) / (60 *
				60));
		var minutes = Math.floor((distance
			% (60 * 60)) / 60);
		var seconds = Math.floor((distance
			% 60));
        var last_html = document.getElementById("running_log").innerHTML;
        var new_html =  last_html +hours + ":" +
			minutes + ":" + seconds + " | "  + log_to_show[distance] + "<br />";
        document.getElementById("running_log").innerHTML = new_html;
    }
	// Time calculations for days, hours, minutes and seconds
	var hours = Math.floor((distance % (60 * 60 * 24)) / (60 * 60));
	var minutes = Math.floor((distance % (60 * 60)) / 60);
	var seconds = Math.floor((distance % 60));
	// Display the result in the element with id="time"
	document.getElementById("time").innerHTML = hours + "h "
		+ minutes + "m " + seconds + "s ";
}, 1000);

		</script>
	</body>
</html>
